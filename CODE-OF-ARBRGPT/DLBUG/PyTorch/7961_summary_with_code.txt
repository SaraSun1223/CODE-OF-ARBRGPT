[Title] [Bug report] RuntimeError_ backward_input can only be called in training mode

## Issue description

The code runs fine on CPU and GPU(pytorch 0.3) but failed on GPU(pytorch 0.4).

## Code example
code can be found from this:
https://github.com/wiseodd/controlled-text-generation

Error message:

Traceback (most recent call last):
File "train_discriminator.py", line 308, in 
main()
File "train_discriminator.py", line 239, in main
loss_G.backward()
File "/home-nfs/yangc1/anaconda3/envs/speech/lib/python3.6/site-packages/torch/tensor.py", line 93, in backward
torch.autograd.backward(self, gradient, retain_graph, create_graph)
File "/home-nfs/yangc1/anaconda3/envs/speech/lib/python3.6/site-packages/torch/autograd/init.py", line 89, in backward
allow_unreachable=True) # allow_unreachable flag
RuntimeError: backward_input can only be called in training mode


## System Info
Please copy and paste the output from our
[environment collection script](https://raw.githubusercontent.com/pytorch/pytorch/master/torch/utils/collect_env.py)
(or fill out the checklist below manually).

You can get the script from here 
https://github.com/wiseodd/controlled-text-generation

and run it with:
```
python train_vae.py --save {--gpu}
python train_discriminator --save {--gpu}
```

- PyTorch or Caffe2: pytorch
- PyTorch version: 0.4
- Python version: 3.6
- CUDA/cuDNN version: 8
